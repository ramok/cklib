<html><head><meta http-equiv=Content-Type content="text/html; charset=utf-8"></head><body>

<h1>Установка и настройка ck.lib и скриптов.</h1>
<h2>Подготовка к установке.</h2>
<ol>
  <li> Скрипты и файлы библиотеки в кодировке utf-8, перекодировать или редактировать ничего <b>НЕ НУЖНО</b>, все будет работать как есть.
  <li> Перенести каталог ck.lib со всеми входящими туда файлами в scripts/
  <li> Перенести файл ck.lib.tcl в scripts/
  <li> Перенести нужные скрипты (файлы *.tcl) в scripts/
</ol>
<h2>Правка кодировки бота.</h2>
Если бот пропатчен SuZi патчем: сходить прочитать настройку бота с патчем на <a href="http://xirc.ru/plugins/forum/forum_viewtopic.php?1827">http://xirc.ru/plugins/forum/forum_viewtopic.php?1827</a>, для виндропа отдельно прочитать настройку тут <a href="http://xirc.ru/plugins/forum/forum_viewtopic.php?2016">http://xirc.ru/plugins/forum/forum_viewtopic.php?2016</a>.
Если бот без патча:
<ol>
  <li> Проверить наличие строки <b>encoding system iso8859-1</b> в конфиге бота, если ее нету - поставить.
  <li> Желательно поставить строку <b>set irc_encoding cp1251</b> ДО загрузки библиотеки, cp1251 заменить на вашу кодировку.
</ol>
<h2>Подключение скриптов.</h2>
<ol>
  <li> Загрузить саму библиотеку: вписать в конфиг строчку <b>source scripts/ck.lib.tcl</b>. Никаких больше файлов загружать <b>НЕ НУЖНО</b>, остальное найдется автоматически.
  <li> Поставить на загрузку сами скрипты, для этого вписать в конфиг <b>::ck::source имяскрипта</b> (например: <b>::ck::source bash.org.ru</b> или <b>::ck::source weather</b>).
</ol>
<h2>Настройка скриптов.</h2>
<ul>
  <li> Вся настройка скриптов ведется из патилайна бота, командой <b>.set</b>
  <li> Синтаксис команды:
  <ol>
    <li> <b>.set? <i>маска</i></b> - показывает краткую помощь по переменным.
    <li> <b>.set <i>маска</i></b> - показывает текущие значения переменных.
    <li> <b>.set <i>переменная значение</i></b> - устанавливает переменную.
    <li> <b>.set <i>переменная</i> -</b> - сбрасывает переменную в состояние по умолчанию.
  </ol>
  <li> Частые переменные:
  <ul>
    <li> <b>*.chanallow</b> - список масок каналов на которых команда разрешена. Например: <b>.set calc.chanallow #chan1 #xxx*</b> - разрешает команду на каналах #chan1 и всех каналах #xxx*. По умолчанию значение <b>*</b>, т.е. команда разрешена на всех каналах.
    <li> <b>*.chandeny</b> - список масок каналов на которых команда запрещена. Формат аналогичен *.chanallow
    <li> <b>*.notice</b> - результат команды запущенной на канале отправляется юзеру нотисом (По умолчанию - <b>off</b>, т.е. команда отсылает результат на канал)
    <li> <b>*.pub.noprefix</b> - запрещение вызова команды без <i>префикса команды</i> (по умолчанию префикс публичных команд - <b>!</b>)
    <li> <b>*.msgmode</b> - приоритет выдачи ботом результатов команды, возможные значения (от более высокого приоритета к более низкому): <b>fast</b>, <b>quick</b>, <b>serv</b>, <b>help</b>. Значение по умолчанию: <b>quick</b>.
  </ul>
  <li> Отдельные переменные модуля cmd:
  <ul>
    <li> <b>mod.cmd.prefix.dcc</b> - префикс для команд в патилайне. По умолчанию - <b>.</b>(точка), это обычный и привычный префикс для патилайн команд и менять его не рекомендую.
    <li> <b>mod.cmd.prefix.msg</b> - префикс для команд в приват. По умолчанию - пусто, т.е. вызов команд в привате должен быть без каких либо префиксов.
    <li> <b>mod.cmd.prefix.pub</b> - префикс для команд на канале. По умолчанию - <b>!</b>
    <li> <b>mod.cmd.pub.noprefix</b> - аналог по-командной настройки <b>*.pub.noprefix</b> но работает сразу на все команды.
  </ul>
</ul>
<h2>Настройка обрезки цвета.</h2>
В <b>v0.8</b> модуля <b>cmd</b> появилась возможность коды цветов из фраз бота. За это отвечают настройки <b>*.stripcolor</b> для отдельного скрипта и <b>mod.cmd.stripcolor</b> для всех скриптов по умолчанию. Формат для задания этой настройки такой: <i>[&lt;#канал&gt;|msg|dcc] &lt;список что обрезать&gt;</i>. В <i>&lt;список что обрезать&gt;</i> входят слова <b>color</b>, <b>underline</b>, <b>reverse</b>, <b>bold</b>, <b>all</b>, которые соответственно отвечают за обрезку конкретных кодов. Если при задании настройки канала не указано - тогда заданные параметры применяются ко всем каналам, приватам и dcc. При выводе значения этой настройки - выдается список, вначале которого идут настройки для всех целей, потом для каждой конкретной цели.
<p><u>Порядок применения параметров обрезки цвета.</u> При выводе фраз, вначале идет попытка найти параметры конкретного скрипта для конкретной цели(канала), если таковые не найдены, применяются параметры по-умолчанию для конкретного скрипта, если и таковых нет, ищутся параметры для конкретной цели(канала) заданные в настройке <b>mod.cmd.stripcolor</b>, если не найдены - применяются параметры этой же настройки по-умолчанию.
<h2>Поддержка https.</h2>
<p>Для поддержки протокола https необходимо установить модуль TLS <a href="http://wiki.tcl.tk/2630">http://wiki.tcl.tk/2630</a></p>
<h2>Ссылки:</h2>
<ul>
  <li> Просмотр репозитория скриптов: <a href="http://cklib.svn.sourceforge.net/viewvc/cklib/trunk/">http://cklib.svn.sourceforge.net/viewvc/cklib/trunk/</a>.
  <li> Инструкция по скачке через SVN: <a href="http://sourceforge.net/svn/?group_id=185572">http://sourceforge.net/svn/?group_id=185572</a>
  <li> Самообновляющийся .tar.gz только с библиотекой: <a href="http://cklib.svn.sourceforge.net/viewvc/cklib/trunk/ck.lib.tar.gz">http://cklib.svn.sourceforge.net/viewvc/cklib/trunk/ck.lib.tar.gz</a>
  <li> Самообновляющийся .tar.gz всего репозитория: <a href="http://cklib.svn.sourceforge.net/viewvc/cklib/trunk.tar.gz">http://cklib.svn.sourceforge.net/viewvc/cklib/trunk.tar.gz</a>
  <li> RSS-каналы изменений: <a href="http://www.feed43.com/cklib.xml">http://www.feed43.com/cklib.xml</a>&nbsp;&nbsp;&nbsp;<a href="http://svn2rss.ru/rss.php?id=196e6282-934b-4e27-9986-69a855790a90">http://svn2rss.ru/rss.php?id=196e6282-934b-4e27-9986-69a855790a90</a>
</ul>
</body></html>
